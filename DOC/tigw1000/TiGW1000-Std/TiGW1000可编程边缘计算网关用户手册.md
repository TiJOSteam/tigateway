# TiGW1000可编程边缘计算网关用户手册

## 产品介绍

TiGW1000是钛云物联开发的支持以太网网络的可编程边缘计算网关,它提供RS485、RS232、DI、DO等多种接口，可通过以太网将数据上报至云端,满足用户对设备的接入需求, 能够支持目前主流的网络接入协议和公有云平台，包括MQTT, COAP,以及阿里云、腾讯云、中国移动ONENET、中国电信AEP等等。

TiGW1000内置钛云物联自主知识产权的钛极OS(TiJOS)物联网操作系统，支持用户通过Java语言进行功能扩展，适用各种工况， 它强大的可编程功能允许用户根据项目需求通过Java语言开发相关所需的功能， 如串口通讯， 协议解析，上传云端等等。

TiGW1000提供了丰富的文档和例程，并提供了大量开源驱动，如MODBUS等，方便用户可以快速的完成所需功能。

![1538222485990](./img/gw100-2.png) 

### 产品特点

- 支持以太网LAN网络

- 支持1路RS485工业总线接入现场设备 

- 支持1路RS232工业总线接入现场设备 

- 支持2路继电器 

- 支持2路数字量输出

- 支持4路数字量输入

- 内置TiJVM Java虚拟机

- 支持用户进行功能扩展

- 支持通过Java语言进行设备协议解析及控制策略

- 提供标准协议库，如Modbus等等

- 用户可内置多个应用对应不同的应用场景

- 支持UDP, TCP, HTTP, MQTT, COAP等多种网络协议

- 支持多种云平台, 如电信云,华为云,阿里云、腾讯云等公有云, 以及用户私有云

  

## 产品规格

| 参数             | 说明                                             |
| ---------------- | ------------------------------------------------ |
| 产品名称         | 可编程边缘计算网关                               |
| 产品型号         | TiGW1000                                         |
| 工作电压         | 9-28V                                            |
| 工作电流         | 140mA                                            |
| 供电方式         | 直流电源                                         |
| 网络传输方式     | 以太网                                           |
| 有线传输方式     | 2路RS485, 可同时工作, 每一路最大支持32个设备连接 |
| 最大应用支持个数 | 32                                               |
| 串口波特率       | 2400~115200bps                                   |
| 编程端口         | USB                                              |
| 外形尺寸         |                                                  |
| 工作温度         | -35°C ~ +75°C                                    |
| 工作湿度         | 5%~95%(无凝露)                                   |
| 外壳材料         | 金属                                             |
| 配件             | 12V电源(1A)，USB数据线                           |



## 接口说明

### 端口

![image-20210108165312817](./img/gw100-2.png)



| 编号 | 接口     | 说明               |
| ---- | -------- | ------------------ |
| 1    | 输入电源 | 9-28V              |
| 2    | USB      | 可编程及日志接口   |
| 3    | 以太网   | RJ45标准以太网接口 |
|      |          |                    |

### 按键

![](./img/gw100-3.jpg)

| 编号 | 接口      | 说明               |
| ---- | --------- | ------------------ |
| 1    | KEY编程键 | 用于切换至编程状态 |
| 2    | RST复位键 | 复位整个系统       |
|      |           |                    |

### 接线端子侧



![gw100](./img/gw100.png)



| 编号  | 接口        | 说明                                |
| ----- | ----------- | ----------------------------------- |
| 1,2   | DI1+/DI1-   | DI1  (5V-36V)                       |
| 3,4   | DI2+/DI2-   | DI2 (5V-36V)                        |
| 5,6   | OUT1+/OUT1- | 继电器1  250V 10A(MAX)              |
| 7,8   | OUT2+/OUT2- | 继电器2 250V 10A(MAX)               |
| 9,10  | RS485 B/A   | RS485                               |
| 11,12 | RS232 TX/RX | RS232                               |
| 13,14 | 5V-/5V+     | 隔离5V电源输出， 5V-与RS232 GND共用 |

### 有线数据接口

#### RS485

支持1路RS485, 支持最大驱动32个RS485从设备

#### RS232

支持1路RS232

#### 可控LED 

提供1个红色电源指示灯和2个可编程控制LED灯，对应于蓝色和绿色， 方便用户在代码中指示设备的当前状态， 建议蓝色灯用于指示网络通讯状态， 绿色灯用于指示设备通讯状态。

#### 继电器

支持两路继电器

#### 数字量输出DO

支持4路数字量输出DO

#### 数字量输入DI

支持4路数字量输入DI

#### LED灯

TiGW1000提供了可编程控制的LED灯， 可在应用中根据实际情况来对LED进行打开，关闭，闪烁等操作。

#### USB编程口

TiGW1000提供了一个USB串口编程口，通过TiDevManager设备管理连接该编程口后进行设备信息查看，应用管理等功能， 同时该编程口也是应用的日志输出口，用于进行应用测试和诊断。

### 网络数据接口

#### 以太网

提供以太网数据接口 

### 其它

#### 直流电源输入接口(5.5*2.1圆形接口)

使用提供的12V直流电源(1A)连接该接口

**为了防止损坏，请不要频繁接插电源，断电后应2S后再上电** 

#### 直流电源输出

TiGW1000同时提供了一路电源输出接口，规格与输入电源相关， 方便用户连接外部传感器设备，节省电压转换器。



#### 功能键和复位键

功能键用于将设备进入开发状态，当用户应用开发完成并设置为自动运行后将进入用户应用状态，此时TiDevManager工具无法进行管理。 当用户需要通过TiDevManger进行设备管理或更新内部应用时，需要通过功能键来进入开发状态，具体操作如下：

1. 按住功能键
2. 按下复位键
3. 松开复位键
4. 松开功能键

此时设备即进入开发状态， 即可使用TiDevManager进行设备管理或应用开发。

**注**：如果用户处于开发状态， 希望停止当前运行的用户应用时，只需要按下复位键或重新插拔电源即可。



## 设备连接

TiGW1000提供了相关配件， 在进行测试前可按如下步骤进行硬件准备工作。

### 通过RS485连接设备

将RS485端口连接到设备进行测试。

### 连接电源

通过直流电源接口连通电源。 

### 应用开发

完成连接后， 即可通过钛极OS提供的工具链进行控制器内的应用开发，具体请参考<TiGW1000可编程边缘计算网关开发指南>.

## 应用运行方式

### 上电自动运行

TiGW1000最大支持32个用户应用， 同时用户可选择其中一个应用设置为上电自动运行，设置之后设备在上电后即可启动该应用。

具有自动运行属性的应用程序在系统启动时自动启动，任何应用程序都可以设置为自动运行属性，系统默认的自动运行程序为ID=0的应用程序(**shell**)，该应用程序为钛极OS(TiJOS)系统**预装的终端程序**，用户无权删除，用户可通过TiDevManager设备管理器下载应用程序、更改系统配置等。

当用户应用开发测试完成后，可以设置为上电自动运行作为正式产品。

### 停止应用并进入可编程状态

**场景1：**

当某个用户应用设置为上电自动运行后，只能通过功能键来进入可编程状态， 操作过程请参考功能键说明，即按住功能键同时按下复位键即可， 此时即可进行应用编程， 或通过TiDevManager设备管理器修改自动运行的用户程序，如果不做修改，重新上电后仍然会自动运行该用户程序， 可将设置ID为0的ti-shell-xxx应用为上电自动运行来恢复默认，之后重新上电后即进入可编程状态。

**为了防止损坏，请不要频繁接插电源，断电后应2S后再上电** 

**场景2：**

用户未设置上电自动运行，在开发测试过程中有可能在代码中使用While(true)等方式进入死循环避免程序中途退出或希望随时停止应用，此时通过复位键复位即可进入可编程状态并重新运行即可。

## 更多资源

TiGW1000是钛云物联的钛极OS(TiJOS)物联网操作系统的一个典型应用， 关于钛极OS(TiJOS)物联网操作系统可参考如下资源：

| 资源                   | url                                          |
| :--------------------- | -------------------------------------------- |
| 钛极OS官网             | [www.tijos.net](http://www.tijos.net)        |
| 钛极OS(TiJOS) 文档中心 | [http://doc.tijos.net](http://doc.tijos.net) |
| 微信公众号 - 钛极OS    | ![WeiXin](./img/TIJOS_WEIXIN.jpg)            |

## 联系方式

北京钛云物联科技有限公司

商务合作：13911058165

品牌热线：010-86462928

公司网址：www.tijos.net

电子邮件：tijos@tijos.net     

在线购买: https://shop423269048.taobao.com/

